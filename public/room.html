<!doctype html><html lang="en"><meta charset="UTF-8"><title>scrum-poker.cards Estimation Room</title><meta name="viewport" content="width=device-width,initial-scale=1"><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet" type="text/css"><style>*{margin:0;padding:0}*,:after,:before{box-sizing:inherit}html{background-color:#fff;box-sizing:border-box;color:#262626;font-family:'Roboto Condensed',Arial,sans-serif;font-size:1.2em;overflow:hidden}body{margin-top:4vh;text-align:center}h1{font-weight:400}h1 .room-name{font-weight:700}input{font-size:1em;border:solid 1px #ccc;border-radius:3px;outline:0 none;padding:6px 8px}table{background-color:#ccc;border-radius:5px;margin:auto;padding:5px}th{padding:4px 6px;text-align:left}td{border-top:solid 1px #999;padding:4px 6px}table.count tr:first-child{font-weight:700}table.estimates td:nth-child(1){text-align:left}table.estimates td:nth-child(2){font-weight:700}table.visualized{background-color:#f09900}table.visualized th{vertical-align:baseline}table.visualized td{border-top:0 none;text-align:center;vertical-align:baseline;width:40px}footer{font-size:.8em;margin-top:3em}</style><h1>Estimation Room &bdquo;<span class="room-name" id="room-name">&ndash;no room name defined&ndash;</span>&ldquo;</h1><br><div id="table-visualized"></div><br><br><div id="table-full-list"></div><br><br><br><div><input type="button" value="Next round (delete estimations) &#x27A4;" id="btn-next-round"></div><script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-analytics.js"></script><script src="https://www.gstatic.com/firebasejs/8.3.0/firebase-database.js"></script><script>const firebaseConfig={apiKey:"AIzaSyAd1uiSyR2XXN8rUaHmXY4GsgUbxmYZJYY",authDomain:"scrumpokercards-38516.firebaseapp.com",databaseURL:"https://scrumpokercards-38516-default-rtdb.europe-west1.firebasedatabase.app",projectId:"scrumpokercards-38516",storageBucket:"scrumpokercards-38516.appspot.com",messagingSenderId:"926440560533",appId:"1:926440560533:web:d4446d1ca7bf643be7089c",measurementId:"G-XHCMWWY1NY"};if(firebase.initializeApp(firebaseConfig),firebase.analytics(),window.location.hash){const a=document.getElementById("room-name"),b=document.getElementById("table-visualized"),c=document.getElementById("table-full-list"),d=document.getElementById("btn-next-round"),e="",f=window.location.hash.substr(1);a.innerHTML=f;const g=firebase.database().ref("estimationRooms/"+f);g.on("value",s=>{s=s.val();if(s){const r=Object.entries(s),o={};r.forEach(e=>{e=e[1].estimate;void 0===o[e]?o[e]=1:o[e]=++o[e]});const n=[];for(const m in o)o.hasOwnProperty(m)&&"undefined"!==m&&n.push([m,o[m]]);const i=[...n];i.sort(function(e,t){return parseInt(e[0],10)-parseInt(t[0],10)});let t="";i[0][0]!==e&&(t='<table class="visualized" cellspacing="0"><tbody><tr><th scope="row">Estimate</th>',i.forEach(e=>{t+=`<td style="font-size: ${1.5*e[1]}em;">${e[0]}</td>`}),t+='</tr><tr><th scope="row">Count</th>',i.forEach(e=>{t+=`<td>${e[1]}</td>`}),t+="</tr></tbody></table>"),b.innerHTML=t;const l=r;l.sort(function(e,t){return e[0]=e[0].substr(0,1).toUpperCase()+e[0].substr(1),t[0]=t[0].substr(0,1).toUpperCase()+t[0].substr(1),e[0]<t[0]?-1:e[0]>t[0]?1:0});let a='<table class="estimates" cellspacing="0"><thead><tr><th>Name</th><th>Estimate</th><th></th></tr></thead><tbody>';l.forEach(e=>{a+=`<tr>
                    <td>${e[0]}</td><td>${e[1].estimate}</td>
                    <td><input type="button" data-delete-user="${e[0]}" title="Remove user from room" value="&times;"></td>
                    </tr>`}),a+="</tbody></table>",c.innerHTML=a;const u=document.querySelectorAll("[data-delete-user]");u.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();e=t.getAttribute("data-delete-user");firebase.database().ref("estimationRooms/"+f+"/"+e).remove()})}),d.addEventListener("click",t=>{t.preventDefault(),r.forEach(t=>{firebase.database().ref("estimationRooms/"+f+"/"+t[0]).update({estimate:e},e=>{e&&console.error("Error occurred after deleting an estimation.",e)})})})}})}</script>